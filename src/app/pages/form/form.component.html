<div
  class="w-100 bg-primary text-white py-3 px-4 d-flex justify-content-between align-items-center"
>
  <h2 class="fw-bold mb-0">
    {{ isEditMode ? 'Editar Solicitação' : 'Nova Solicitação' }}
  </h2>
</div>

<div class="container py-4">
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-md-6 pe-md-4">
        <fieldset formGroupName="solicitante" class="mb-4">
          <legend>Dados do Solicitante</legend>
          <div class="mb-3">
            <label>Nome *</label>
            <input
              type="text"
              class="form-control"
              formControlName="ds_responsavel"
            />
          </div>
          <div class="mb-3">
            <label>CPF *</label>
            <input
              type="text"
              class="form-control"
              formControlName="nu_cpf"
              mask="000.000.000-00"
              placeholder="000.000.000-00"
            />
            <small
              class="text-danger"
              *ngIf="
                form.get('solicitante.nu_cpf')?.invalid &&
                form.get('solicitante.nu_cpf')?.touched
              "
            >
              CPF inválido
            </small>
          </div>
          <div class="mb-3">
            <label>Data de Nascimento *</label>
            <input
              type="date"
              class="form-control"
              formControlName="date_nascimento"
            />
          </div>
        </fieldset>
        <fieldset formGroupName="empresa" class="mb-4">
          <legend>Dados da Empresa</legend>
          <div class="mb-3">
            <label>Nome Fantasia *</label>
            <input
              type="text"
              class="form-control"
              formControlName="ds_nome_fantasia"
            />
          </div>
          <div class="mb-3">
            <label>Entidade de Registro *</label>
            <select class="form-select" formControlName="co_entidade_registro">
              <option value="" disabled>Selecione uma opção</option>
              <option
                *ngFor="let entity of registrationEntities"
                [value]="entity.key"
              >
                {{ entity.value }}
              </option>
            </select>
          </div>
        </fieldset>
      </div>

      <div class="col-md-6 pe-md-4">
        <fieldset formGroupName="endereco" class="mt-3">
          <legend>Endereço</legend>
          <div class="mb-3">
            <label>CEP *</label>
            <input
              type="text"
              class="form-control"
              formControlName="co_cep"
              mask="00000-000"
              placeholder="00000-000"
            />
            <small
              class="text-danger"
              *ngIf="
                form.get('solicitante.co_cep')?.invalid &&
                form.get('solicitante.co_cep')?.touched
              "
            >
              CEP inválido
            </small>
          </div>
          <div class="mb-3">
            <label>Logradouro *</label>
            <input
              type="text"
              class="form-control"
              formControlName="ds_logradouro"
            />
          </div>
          <div class="mb-3">
            <label>Número *</label>
            <input
              type="text"
              class="form-control"
              formControlName="co_numero"
            />
          </div>
          <div class="mb-3">
            <label>Complemento</label>
            <input
              type="text"
              class="form-control"
              formControlName="ds_complemento"
            />
          </div>
          <div class="mb-3">
            <label>Bairro *</label>
            <input
              type="text"
              class="form-control"
              formControlName="ds_bairro"
            />
          </div>
          <div class="mb-3">
            <label>Município *</label>
            <input
              type="text"
              class="form-control"
              formControlName="ds_municipio"
            />
          </div>
          <div class="mb-3">
            <label>UF *</label>
            <select class="form-select" formControlName="co_uf">
              <option value="" disabled>Selecione uma opção</option>
              <option *ngFor="let state of states" [value]="state.sigla">
                {{ state.nome }} ({{ state.sigla }})
              </option>
            </select>
          </div>
        </fieldset>
      </div>
    </div>

    <div class="d-flex justify-content-end mt-4">
      <button class="btn btn-success" [disabled]="form.invalid || isSubmitting">
        {{ isSubmitting ? 'Salvando...' : 'Salvar' }}
      </button>
      <button type="button" class="btn btn-secondary ms-2" (click)="onCancel()">
        Cancelar
      </button>
    </div>
  </form>
</div>
